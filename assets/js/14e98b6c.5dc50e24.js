"use strict";(self.webpackChunkresium_docs=self.webpackChunkresium_docs||[]).push([[7581],{3905:function(e,n,t){t.d(n,{Zo:function(){return c},kt:function(){return m}});var i=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function p(e,n){if(null==e)return{};var t,i,r=function(e,n){if(null==e)return{};var t,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)t=o[i],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)t=o[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var l=i.createContext({}),d=function(e){var n=i.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):a(a({},n),e)),t},c=function(e){var n=d(e.components);return i.createElement(l.Provider,{value:n},e.children)},s={inlineCode:"code",wrapper:function(e){var n=e.children;return i.createElement(i.Fragment,{},n)}},u=i.forwardRef((function(e,n){var t=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,c=p(e,["components","mdxType","originalType","parentName"]),u=d(t),m=r,h=u["".concat(l,".").concat(m)]||u[m]||s[m]||o;return t?i.createElement(h,a(a({ref:n},c),{},{components:t})):i.createElement(h,a({ref:n},c))}));function m(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var o=t.length,a=new Array(o);a[0]=u;var p={};for(var l in n)hasOwnProperty.call(n,l)&&(p[l]=n[l]);p.originalType=e,p.mdxType="string"==typeof e?e:r,a[1]=p;for(var d=2;d<o;d++)a[d]=t[d];return i.createElement.apply(null,a)}return i.createElement.apply(null,t)}u.displayName="MDXCreateElement"},4353:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return p},contentTitle:function(){return l},metadata:function(){return d},toc:function(){return c},default:function(){return u}});var i=t(7462),r=t(3366),o=(t(7294),t(3905)),a=["components"],p={id:"migration",title:"Migration Guide"},l="Migration Guide",d={unversionedId:"migration",id:"migration",isDocsHomePage:!1,title:"Migration Guide",description:"v1.14",source:"@site/docs/05-migration.md",sourceDirName:".",slug:"/migration",permalink:"/migration",editUrl:"https://github.com/reearth/resium/edit/master/docs/docs/05-migration.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{id:"migration",title:"Migration Guide"},sidebar:"docs",previous:{title:"Advanced",permalink:"/advanced"},next:{title:"Contribution",permalink:"/contribution"}},c=[{value:"v1.14",id:"v114",children:[{value:"Event handlers no longer receive an entity and primitive directly",id:"event-handlers-no-longer-receive-an-entity-and-primitive-directly",children:[],level:3},{value:"EntityStaticDescription component is deprecated",id:"entitystaticdescription-component-is-deprecated",children:[],level:3}],level:2},{value:"v1.12",id:"v112",children:[{value:"Official type definition is supported!",id:"official-type-definition-is-supported",children:[],level:3},{value:"Some component properties are fixed",id:"some-component-properties-are-fixed",children:[],level:3},{value:"<code>useCesium</code> hook is no longer needed a type argument",id:"usecesium-hook-is-no-longer-needed-a-type-argument",children:[],level:3}],level:2},{value:"v1.9",id:"v19",children:[],level:2},{value:"v1.0",id:"v10",children:[{value:"Resium are fully reimplemented",id:"resium-are-fully-reimplemented",children:[],level:3},{value:"Changed: Entity description",id:"changed-entity-description",children:[],level:3},{value:"Decrepated: PropType",id:"decrepated-proptype",children:[],level:3},{value:"Renamed / Decrepated: properties",id:"renamed--decrepated-properties",children:[{value:"<code>url</code> or <code>czml</code> prop of Kml/Czml/GeoJsonDataSource",id:"url-or-czml-prop-of-kmlczmlgeojsondatasource",children:[],level:4},{value:"<code>onMount</code>, <code>onUpdate</code> and <code>onUnmount</code> prop",id:"onmount-onupdate-and-onunmount-prop",children:[],level:4}],level:3}],level:2}],s={toc:c};function u(e){var n=e.components,t=(0,r.Z)(e,a);return(0,o.kt)("wrapper",(0,i.Z)({},s,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"migration-guide"},"Migration Guide"),(0,o.kt)("h2",{id:"v114"},"v1.14"),(0,o.kt)("h3",{id:"event-handlers-no-longer-receive-an-entity-and-primitive-directly"},"Event handlers no longer receive an entity and primitive directly"),(0,o.kt)("p",null,"Until now, you could receive the picked entities and primitives directly in the event handler of the component."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx"},"<Viewer onClick={(e, target) => {\n  if (target instanceof Entity) {\n    // target is a entity!\n  }\n}} />\n")),(0,o.kt)("p",null,"This behavior has been changed so that the value returned by ",(0,o.kt)("inlineCode",{parentName:"p"},"scene.pick")," method is passed directly to the event handler:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx"},"<Viewer onClick={(e, target) => {\n  if (target?.id instanceof Entity) {\n    // target.id is an Entity!\n  } else if (target?.primitive instanceof Primitive) {\n    // target.id is a Primitive!\n  } else if (target instanceof Cesium3DTileFeature) {\n    // target is a Cesium3DTileFeature!\n  }\n}} />\n")),(0,o.kt)("p",null,"This change will apply to all components that have event properties."),(0,o.kt)("h3",{id:"entitystaticdescription-component-is-deprecated"},"EntityStaticDescription component is deprecated"),(0,o.kt)("p",null,"EntityStaticDescription component has been remvoed from Resium, because it did not mesh well with the build tools."),(0,o.kt)("p",null,"Use EntityDescription component or ",(0,o.kt)("inlineCode",{parentName:"p"},"description")," prop of Entity component instead:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx"},'<>\n  <EntityDescritpion>\n    <p>Hello</p>\n  </EntityDescription>\n  <Entity description="<p>hello</p>">\n</>\n')),(0,o.kt)("h2",{id:"v112"},"v1.12"),(0,o.kt)("p",null,"Changes related to TypeScript type definitions are main, but some component properties are changed also."),(0,o.kt)("h3",{id:"official-type-definition-is-supported"},"Official type definition is supported!"),(0,o.kt)("p",null,"Now Cesium's official TypeScript type definitions since Cesium v1.70 is used, so ",(0,o.kt)("inlineCode",{parentName:"p"},"@types/cesium")," is no longer used. You can uninstall it."),(0,o.kt)("h3",{id:"some-component-properties-are-fixed"},"Some component properties are fixed"),(0,o.kt)("p",null,"Some components' properties are mistakenly typed and they are fixed, but that includes some breaking changes. Some properties are changed Cesium prop type: e.g. Cesium props -> Cesium read-only props."),(0,o.kt)("h3",{id:"usecesium-hook-is-no-longer-needed-a-type-argument"},(0,o.kt)("inlineCode",{parentName:"h3"},"useCesium")," hook is no longer needed a type argument"),(0,o.kt)("p",null,"You can still add a type argument, but you can also omit it."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},'import { Viewer } from "cesium";\nimport { useCesium } from "resium";\n\n// before\nconst { viewer } = useCesium<{ viewer?: Viewer }>();\n\n// after\nconst { viewer } = useCesium();\n')),(0,o.kt)("h2",{id:"v19"},"v1.9"),(0,o.kt)("p",null,"Resium are fully reimplemented with React Hooks. There are possibilities that the behavior has changed in edge cases."),(0,o.kt)("p",null,"And some properties and types are changed, removed, or renamed. For details, please check ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/reearth/resium/tree/main/CHANGELOG.md"},"changelog"),"."),(0,o.kt)("h2",{id:"v10"},"v1.0"),(0,o.kt)("h3",{id:"resium-are-fully-reimplemented"},"Resium are fully reimplemented"),(0,o.kt)("p",null,"New component lifecycle and new React Context API in React v16.3 are supported."),(0,o.kt)("p",null,"There are possibilities that the behavior has changed in edge cases."),(0,o.kt)("h3",{id:"changed-entity-description"},"Changed: Entity description"),(0,o.kt)("p",null,"Children of Entity component are no longer rendered as description. Use ",(0,o.kt)("inlineCode",{parentName:"p"},"EntityDescription")," component instead."),(0,o.kt)("p",null,"Before:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx"},'import { Viewer, Entity } from "resium";\n\nconst Component = () => (\n  <Viewer>\n    <Entity>\n      <h1>Hello, world</h1>\n      <p>This is test</p>\n    </Entity>\n  </Viewer>\n);\n')),(0,o.kt)("p",null,"After:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx"},'import { Viewer, Entity, EntityDescription } from "resium";\n\nconst Component = () => (\n  <Viewer>\n    <Entity>\n      <EntityDescription>\n        <h1>Hello, world</h1>\n        <p>This is test</p>\n      </EntityDescription>\n    </Entity>\n  </Viewer>\n);\n')),(0,o.kt)("p",null,"Now only ",(0,o.kt)("inlineCode",{parentName:"p"},"EntityDescription")," depends on ",(0,o.kt)("inlineCode",{parentName:"p"},"react-dom"),"."),(0,o.kt)("h3",{id:"decrepated-proptype"},"Decrepated: PropType"),(0,o.kt)("p",null,"PropType is no longer used. TypeScript is recommended."),(0,o.kt)("h3",{id:"renamed--decrepated-properties"},"Renamed / Decrepated: properties"),(0,o.kt)("p",null,"See ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/reearth/resium/tree/main/CHANGELOG.md"},"CHANGELOG"),"."),(0,o.kt)("h4",{id:"url-or-czml-prop-of-kmlczmlgeojsondatasource"},(0,o.kt)("inlineCode",{parentName:"h4"},"url")," or ",(0,o.kt)("inlineCode",{parentName:"h4"},"czml")," prop of Kml/Czml/GeoJsonDataSource"),(0,o.kt)("p",null,"They have been integrated to ",(0,o.kt)("inlineCode",{parentName:"p"},"data")," prop. Now ",(0,o.kt)("inlineCode",{parentName:"p"},"data")," prop accepts URL string, Cesium.Resouce, and data object."),(0,o.kt)("h4",{id:"onmount-onupdate-and-onunmount-prop"},(0,o.kt)("inlineCode",{parentName:"h4"},"onMount"),", ",(0,o.kt)("inlineCode",{parentName:"h4"},"onUpdate")," and ",(0,o.kt)("inlineCode",{parentName:"h4"},"onUnmount")," prop"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"onMount"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"onUpdate")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"onUnmount")," prop have been deprecated as they violate React's custom. Use ",(0,o.kt)("inlineCode",{parentName:"p"},"ref")," prop instead."),(0,o.kt)("p",null,"Before:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx"},"const Component = () => (\n  <Viewer\n    onMount={viewer => {\n      // some code\n    }}\n  />\n);\n")),(0,o.kt)("p",null,"After:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx"},"class Component extends React.PureComponent {\n  ref = React.createRef();\n\n  componentDidMount() {\n    if (ref.current) {\n      const viewer = ref.current.cesiumElement;\n      // some code\n    }\n  }\n\n  render() {\n    return (\n      <Viewer ref={this.ref} />\n    );\n  }\n);\n")))}u.isMDXComponent=!0}}]);